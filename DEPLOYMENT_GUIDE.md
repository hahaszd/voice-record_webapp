# ğŸš€ VoiceSpark åŒç¯å¢ƒéƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•
- [ç¯å¢ƒæ¶æ„](#ç¯å¢ƒæ¶æ„)
- [Railway éƒ¨ç½²æ­¥éª¤](#railway-éƒ¨ç½²æ­¥éª¤)
- [æ—¥å¸¸å·¥ä½œæµç¨‹](#æ—¥å¸¸å·¥ä½œæµç¨‹)
- [éƒ¨ç½²æ£€æŸ¥æ¸…å•](#éƒ¨ç½²æ£€æŸ¥æ¸…å•)
- [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ğŸ—ï¸ ç¯å¢ƒæ¶æ„

### **ç”Ÿäº§ç¯å¢ƒï¼ˆProductionï¼‰**
- **åˆ†æ”¯**: `main`
- **Railway Project**: `voicespark-production`
- **åŸŸå**: `voicespark.app` (æˆ– Railway è‡ªåŠ¨åŸŸå)
- **ç”¨é€”**: ç¨³å®šç‰ˆæœ¬ï¼Œä¾›ç”¨æˆ·ä½¿ç”¨
- **éƒ¨ç½²**: æ‰‹åŠ¨è§¦å‘ï¼ˆç¡®ä¿ç¨³å®šï¼‰

### **å¼€å‘ç¯å¢ƒï¼ˆDevelopmentï¼‰**
- **åˆ†æ”¯**: `dev`
- **Railway Project**: `voicespark-dev`
- **åŸŸå**: `voicespark-dev.up.railway.app`
- **ç”¨é€”**: æµ‹è¯•æ–°åŠŸèƒ½ï¼Œè°ƒè¯•ä¿®æ”¹
- **éƒ¨ç½²**: è‡ªåŠ¨éƒ¨ç½²ï¼ˆpush å³éƒ¨ç½²ï¼‰

---

## ğŸ› ï¸ Railway éƒ¨ç½²æ­¥éª¤

### **æ­¥éª¤ 1ï¼šç™»å½• Railway**
1. è®¿é—® https://railway.app/
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•

### **æ­¥éª¤ 2ï¼šé…ç½®ç”Ÿäº§ç¯å¢ƒï¼ˆå·²æœ‰é¡¹ç›®ï¼‰**

#### 2.1 é‡å‘½åç°æœ‰é¡¹ç›®
1. è¿›å…¥ä½ å½“å‰çš„é¡¹ç›®
2. Settings â†’ General â†’ Project Name
3. æ”¹åä¸ºï¼š`voicespark-production`

#### 2.2 ç¡®è®¤åˆ†æ”¯è®¾ç½®
1. Settings â†’ Deployments
2. Source â†’ Branch: `main`
3. âœ… å–æ¶ˆå‹¾é€‰ "Auto Deploy"ï¼ˆæ‰‹åŠ¨éƒ¨ç½²ï¼Œæ›´å®‰å…¨ï¼‰

#### 2.3 æ·»åŠ ç¯å¢ƒæ ‡è¯†
1. Settings â†’ Variables
2. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   ```
   NODE_ENV=production
   DEPLOY_ENVIRONMENT=production
   ```

### **æ­¥éª¤ 3ï¼šåˆ›å»ºå¼€å‘ç¯å¢ƒï¼ˆæ–°é¡¹ç›®ï¼‰**

#### 3.1 åˆ›å»ºæ–°é¡¹ç›®
1. å›åˆ° Railway Dashboard
2. ç‚¹å‡» **"New Project"**
3. é€‰æ‹© **"Deploy from GitHub repo"**

#### 3.2 é€‰æ‹©ä»“åº“å’Œåˆ†æ”¯
1. é€‰æ‹©ä»“åº“ï¼š`hahaszd/voice-record_webapp`
2. **é‡è¦**: åœ¨éƒ¨ç½²å‰ï¼Œç‚¹å‡» "Configure"
3. Source â†’ Branch: é€‰æ‹© **`dev`**
4. ç‚¹å‡» "Deploy"

#### 3.3 å‘½åé¡¹ç›®
1. Settings â†’ General â†’ Project Name
2. æ”¹åä¸ºï¼š`voicespark-dev`

#### 3.4 é…ç½®ç¯å¢ƒå˜é‡
1. Settings â†’ Variables
2. æ·»åŠ æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡ï¼š
   ```
   NODE_ENV=development
   DEPLOY_ENVIRONMENT=development
   GOOGLE_APPLICATION_CREDENTIALS_JSON=[ä½ çš„å‡­è¯]
   PORT=(Railway è‡ªåŠ¨æä¾›)
   ```

#### 3.5 å¯ç”¨è‡ªåŠ¨éƒ¨ç½²
1. Settings â†’ Deployments
2. âœ… å‹¾é€‰ "Auto Deploy"
3. Source Branch: `dev`

#### 3.6 è·å–å¼€å‘ç¯å¢ƒåŸŸå
1. Settings â†’ Domains
2. Railway ä¼šè‡ªåŠ¨ç”Ÿæˆï¼š`voicespark-dev-production-xxxx.up.railway.app`
3. ä¿å­˜è¿™ä¸ªåŸŸåï¼Œç”¨äºæµ‹è¯•

---

## ğŸ“ æ—¥å¸¸å·¥ä½œæµç¨‹

### **åœºæ™¯ 1ï¼šå¼€å‘æ–°åŠŸèƒ½**

```bash
# 1. åˆ‡æ¢åˆ° dev åˆ†æ”¯
git checkout dev

# 2. ç¡®ä¿ä»£ç æœ€æ–°
git pull origin dev

# 3. å¼€å‘æ–°åŠŸèƒ½
# ä¿®æ”¹ä»£ç ...

# 4. æäº¤å¹¶æ¨é€
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git push

# 5. è‡ªåŠ¨éƒ¨ç½²åˆ°å¼€å‘ç¯å¢ƒ
# Railway ä¼šè‡ªåŠ¨æ£€æµ‹ push å¹¶éƒ¨ç½²

# 6. åœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•
# è®¿é—®: voicespark-dev.up.railway.app
```

### **åœºæ™¯ 2ï¼šä¿®å¤ Bug**

```bash
# 1. åœ¨ dev åˆ†æ”¯ä¿®å¤
git checkout dev
# ä¿®æ”¹ä»£ç ...
git add .
git commit -m "fix: ä¿®å¤ç§»åŠ¨ç«¯é‡å é—®é¢˜"
git push

# 2. åœ¨å¼€å‘ç¯å¢ƒéªŒè¯ä¿®å¤
# æµ‹è¯•é€šè¿‡å...

# 3. åˆå¹¶åˆ° mainï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
git checkout main
git merge dev
git push

# 4. æ‰‹åŠ¨éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ
# Railway Dashboard â†’ voicespark-production â†’ Deploy
```

### **åœºæ™¯ 3ï¼šç´§æ€¥ä¿®å¤ï¼ˆç”Ÿäº§ç¯å¢ƒæœ‰é—®é¢˜ï¼‰**

```bash
# 1. ç›´æ¥åœ¨ main åˆ†æ”¯ä¿®å¤
git checkout main
# ä¿®å¤å…³é”® bug...
git add .
git commit -m "hotfix: ç´§æ€¥ä¿®å¤XXX"
git push

# 2. æ‰‹åŠ¨éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ
# Railway Dashboard â†’ Deploy

# 3. åŒæ­¥åˆ° dev åˆ†æ”¯
git checkout dev
git merge main
git push
```

---

## âœ… éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•

### **æµ‹è¯•æ¸…å•ï¼ˆåœ¨å¼€å‘ç¯å¢ƒï¼‰**

#### åŠŸèƒ½æµ‹è¯•
- [ ] å½•éŸ³åŠŸèƒ½æ­£å¸¸
- [ ] è½¬å½•åŠŸèƒ½æ­£å¸¸
- [ ] è‡ªåŠ¨å½•éŸ³åŠŸèƒ½æ­£å¸¸
- [ ] è‡ªåŠ¨å¤åˆ¶åŠŸèƒ½æ­£å¸¸
- [ ] å†å²è®°å½•åŠŸèƒ½æ­£å¸¸

#### å…¼å®¹æ€§æµ‹è¯•
- [ ] æ¡Œé¢ç«¯ Chrome æµ‹è¯•é€šè¿‡
- [ ] æ¡Œé¢ç«¯ Safari æµ‹è¯•é€šè¿‡
- [ ] ç§»åŠ¨ç«¯ iOS Safari æµ‹è¯•é€šè¿‡
- [ ] ç§»åŠ¨ç«¯ Android Chrome æµ‹è¯•é€šè¿‡

#### UI æµ‹è¯•
- [ ] æŒ‰é’®ä½ç½®æ­£ç¡®
- [ ] æ³¢å½¢æ˜¾ç¤ºæ­£å¸¸
- [ ] å–æ¶ˆæŒ‰é’®ä½ç½®æ­£ç¡®
- [ ] ç§»åŠ¨ç«¯æ— é‡å é—®é¢˜
- [ ] è®¡æ—¶å™¨æ˜¾ç¤ºæ­£ç¡®

#### æ€§èƒ½æµ‹è¯•
- [ ] é¡µé¢åŠ è½½é€Ÿåº¦æ­£å¸¸
- [ ] è½¬å½•é€Ÿåº¦æ­£å¸¸
- [ ] æ— å†…å­˜æ³„æ¼
- [ ] Console æ— é”™è¯¯

### **éƒ¨ç½²å‰ç¡®è®¤**

- [ ] ä»£ç å·²åœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•é€šè¿‡
- [ ] å·²é˜…è¯»æœ¬æ¬¡æ›´æ–°çš„æ‰€æœ‰ commit
- [ ] ç¡®è®¤æ²¡æœ‰é—ç•™çš„ console.log æˆ–è°ƒè¯•ä»£ç 
- [ ] ç¡®è®¤æ‰€æœ‰ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
- [ ] å·²é€šçŸ¥å›¢é˜Ÿï¼ˆå¦‚æœ‰ï¼‰

### **éƒ¨ç½²æ­¥éª¤**

1. [ ] `git checkout main`
2. [ ] `git merge dev`
3. [ ] `git push`
4. [ ] Railway Dashboard â†’ voicespark-production
5. [ ] ç‚¹å‡» "Deploy" æŒ‰é’®
6. [ ] è§‚å¯Ÿéƒ¨ç½²æ—¥å¿—ï¼Œç¡®ä¿æ— é”™è¯¯
7. [ ] éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ç”Ÿäº§ç¯å¢ƒæµ‹è¯•å…³é”®åŠŸèƒ½
8. [ ] å¦‚æœ‰é—®é¢˜ï¼Œç«‹å³å›æ»šï¼ˆRedeploy ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼‰

---

## ğŸ” æ•…éšœæ’æŸ¥

### **é—®é¢˜ 1ï¼šå¼€å‘ç¯å¢ƒéƒ¨ç½²å¤±è´¥**

**æ£€æŸ¥**ï¼š
1. Railway Logs â†’ æŸ¥çœ‹é”™è¯¯æ—¥å¿—
2. ç¡®è®¤ `dev` åˆ†æ”¯ä»£ç æ— è¯­æ³•é”™è¯¯
3. ç¡®è®¤ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®

**è§£å†³**ï¼š
```bash
# å›æ»šåˆ°ä¸Šä¸€ä¸ªå·¥ä½œç‰ˆæœ¬
git checkout dev
git reset --hard HEAD~1
git push -f
```

### **é—®é¢˜ 2ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å¤±è´¥**

**ç´§æ€¥å›æ»š**ï¼š
1. Railway Dashboard â†’ voicespark-production
2. Deployments â†’ é€‰æ‹©ä¸Šä¸€ä¸ªæˆåŠŸçš„éƒ¨ç½²
3. ç‚¹å‡» "Redeploy"

### **é—®é¢˜ 3ï¼šä¸¤ä¸ªç¯å¢ƒè¡Œä¸ºä¸ä¸€è‡´**

**æ£€æŸ¥**ï¼š
1. ç¡®è®¤ä¸¤ä¸ªç¯å¢ƒä½¿ç”¨ç›¸åŒçš„ä»£ç 
   ```bash
   git diff main dev
   ```
2. ç¡®è®¤ç¯å¢ƒå˜é‡é…ç½®ä¸€è‡´
3. ç¡®è®¤ Railway ä½¿ç”¨çš„åˆ†æ”¯æ­£ç¡®

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### **æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**
1. Railway Dashboard â†’ é¡¹ç›®
2. Deployments â†’ æŸ¥çœ‹éƒ¨ç½²å†å²
3. æ¯æ¬¡éƒ¨ç½²éƒ½æœ‰ï¼š
   - æäº¤ä¿¡æ¯
   - éƒ¨ç½²æ—¶é—´
   - éƒ¨ç½²çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰

### **æŸ¥çœ‹è¿è¡Œæ—¥å¿—**
1. Railway Dashboard â†’ é¡¹ç›®
2. Logs â†’ å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—
3. å¯ä»¥è¿‡æ»¤ï¼šé”™è¯¯ã€è­¦å‘Šã€ä¿¡æ¯

### **ç›‘æ§èµ„æºä½¿ç”¨**
1. Railway Dashboard â†’ é¡¹ç›®
2. Metrics â†’ æŸ¥çœ‹ï¼š
   - CPU ä½¿ç”¨ç‡
   - å†…å­˜ä½¿ç”¨
   - ç½‘ç»œæµé‡
   - è´¹ç”¨ç»Ÿè®¡

---

## ğŸ’° è´¹ç”¨é¢„ä¼°

### **Railway å…è´¹é¢åº¦**
- æ¯æœˆ $5 å…è´¹é¢åº¦ï¼ˆæ¯ä¸ªè´¦å·ï¼‰
- ä¸¤ä¸ªé¡¹ç›®å…±äº«è¿™ $5

### **é¢„ä¼°ä½¿ç”¨**
- å°æµé‡ç½‘ç«™ï¼ˆ<100 è®¿é—®/å¤©ï¼‰ï¼šçº¦ $2-3/æœˆ
- ä¸­æµé‡ç½‘ç«™ï¼ˆ100-500 è®¿é—®/å¤©ï¼‰ï¼šçº¦ $5-8/æœˆ

### **æˆæœ¬ä¼˜åŒ–**
1. å¼€å‘ç¯å¢ƒåªåœ¨å·¥ä½œæ—¶é—´ä½¿ç”¨
2. å¯ä»¥åœ¨ Railway ä¸­æš‚åœå¼€å‘ç¯å¢ƒï¼ˆä¸ä½¿ç”¨æ—¶ï¼‰
3. å®šæœŸæ¸…ç†æ—§çš„éƒ¨ç½²è®°å½•

---

## ğŸ¯ æœ€ä½³å®è·µ

### **1. åˆ†æ”¯ç®¡ç†**
- `main`: åªåŒ…å«ç¨³å®šç‰ˆæœ¬
- `dev`: æ—¥å¸¸å¼€å‘å’Œæµ‹è¯•
- `feature/*`: å¤§åŠŸèƒ½å¼€å‘ï¼ˆå¯é€‰ï¼‰
- `hotfix/*`: ç´§æ€¥ä¿®å¤ï¼ˆå¯é€‰ï¼‰

### **2. Commit è§„èŒƒ**
```
feat: æ–°åŠŸèƒ½
fix: Bug ä¿®å¤
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
refactor: é‡æ„
test: æµ‹è¯•
chore: æ„å»º/å·¥å…·é…ç½®
```

### **3. éƒ¨ç½²é¢‘ç‡**
- **å¼€å‘ç¯å¢ƒ**: éšæ—¶éƒ¨ç½²ï¼Œpush å³éƒ¨ç½²
- **ç”Ÿäº§ç¯å¢ƒ**: æ¯å‘¨ 1-2 æ¬¡ï¼Œæˆ–æœ‰é‡è¦ä¿®å¤æ—¶

### **4. å›æ»šç­–ç•¥**
- ä¿ç•™æœ€è¿‘ 10 ä¸ªç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- éƒ¨ç½²å‰åšå¥½å¤‡ä»½
- æœ‰é—®é¢˜ç«‹å³å›æ»šï¼Œä¸è¦å°è¯•ç°åœºä¿®å¤

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### **Railway å®˜æ–¹èµ„æº**
- æ–‡æ¡£: https://docs.railway.app/
- ç¤¾åŒº: https://discord.gg/railway
- çŠ¶æ€: https://status.railway.app/

### **é¡¹ç›®ç›¸å…³**
- GitHub Issues: æŠ¥å‘Š bug
- COMMIT_GUIDE.md: æäº¤è§„èŒƒ
- RAILWAY_DEPLOYMENT_GUIDE.md: Railway è¯¦ç»†é…ç½®

---

**æœ€åæ›´æ–°**: 2026-02-04  
**ç»´æŠ¤è€…**: VoiceSpark Team
