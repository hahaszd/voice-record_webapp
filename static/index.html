<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-75D37JVX99"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-75D37JVX99');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Recorder & Transcription</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤</text></svg>">
    <link rel="stylesheet" href="/static/style.css?v=22">
</head>
<body>
    <div class="container">
        <h1>ğŸ¤ Voice Transcription</h1>
        
        <div class="main-layout">
            <!-- Left: Transcript Result -->
            <div id="resultSection" class="result-section">
                <div class="result-header">
                    <h3>Transcript</h3>
                <button id="historyBtn" class="history-btn" title="View transcription history">
                    <span>ğŸ“œ</span>
                </button>
                <label class="auto-copy-switch" title="Auto-copy transcript to clipboard">
                    <input type="checkbox" id="autoCopyToggle" checked>
                    <span class="slider"></span>
                    <span class="icon-label">ğŸ“‹</span>
                </label>
                <label class="auto-notify-switch" title="Notify when transcription completes">
                    <input type="checkbox" id="autoNotifyToggle" checked>
                    <span class="slider"></span>
                    <span class="icon-label">ğŸ””</span>
                </label>
                </div>
                <div class="result-box">
                    <textarea id="transcriptionResult" readonly placeholder="Start recording, then click Transcribe..."></textarea>
                    <button id="copyBtn" class="copy-btn" title="Copy to clipboard" disabled>
                        <span>ğŸ“‹</span>
                    </button>
                </div>
                <div id="loadingIndicator" class="loading" style="visibility: hidden;">
                    <div class="spinner"></div>
                    <span>Transcribing...</span>
                </div>
            </div>

            <!-- Right: Controls -->
            <div class="control-panel">
                <!-- 1. Audio Source -->
                <div class="audio-source-selector" title="Select audio input source">
                    <label for="audioSource">ğŸ™ï¸</label>
                    <select id="audioSource">
                        <option value="microphone" selected>ğŸ¤ Mic</option>
                        <option value="system">ğŸ”Š System</option>
                        <option value="both">ğŸµ Both</option>
                    </select>
                </div>

                <!-- 2. Duration -->
                <div id="playbackSection" class="playback-section">
                    <h4 title="Select transcription duration">â±ï¸ Duration</h4>
                    <div class="button-group">
                        <div class="duration-option" title="30 seconds">
                            <span class="duration-label">30s</span>
                            <label class="default-duration-checkbox">
                                <input type="checkbox" class="default-duration-check" data-duration="30">
                            </label>
                        </div>
                        <div class="duration-option" title="1 minute">
                            <span class="duration-label">1m</span>
                            <label class="default-duration-checkbox">
                                <input type="checkbox" class="default-duration-check" data-duration="60">
                            </label>
                        </div>
                        <div class="duration-option" title="5 minutes">
                            <span class="duration-label">5m</span>
                            <label class="default-duration-checkbox">
                                <input type="checkbox" class="default-duration-check" data-duration="300" checked>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 3. Recording Controls -->
                <div class="recording-section">
                    <div class="recording-controls">
                        <label class="auto-record-switch" title="Auto-start recording after transcription">
                            <input type="checkbox" id="autoRecordToggle" checked>
                            <span class="slider"></span>
                            <span class="icon-label">ğŸ”</span>
                        </label>
                        <button id="recordBtn" class="record-btn" title="Start recording">
                            <span class="mic-icon">ğŸ¤</span>
                            <span id="recordBtnText">Record</span>
                        </button>
                    </div>
                    <div id="recordingTime" class="recording-time">00:00</div>
                    <!-- Cancel Button -->
                    <button id="cancelRecordBtn" class="cancel-record-btn" style="display: none;" title="Cancel recording">
                        <span>âœ•</span>
                    </button>
                    <div id="recordingStatus" class="recording-status">Ready</div>
                </div>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="history-modal">
        <div class="history-modal-content">
            <div class="history-modal-header">
                <h2>ğŸ“œ Transcription History</h2>
                <button id="clearHistoryBtn" class="clear-history-btn" title="Clear all history">
                    ğŸ—‘ï¸ Clear All
                </button>
                <button id="closeHistoryBtn" class="close-history-btn" title="Close">
                    âœ•
                </button>
            </div>
            <div id="historyList" class="history-list">
                <div class="history-empty">
                    No transcription history yet. Start recording to create your first transcript!
                </div>
            </div>
        </div>
    </div>

    <script src="/static/audio-storage.js?v=22"></script>
    <script src="/static/script.js?v=22"></script>
</body>
</html>
