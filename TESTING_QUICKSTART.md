# ğŸš€ å¿«é€Ÿå¼€å§‹ - VoiceSpark è‡ªåŠ¨åŒ–æµ‹è¯•

## âš¡ 5 åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```bash
# å®‰è£… Node.js ä¾èµ–
npm install

# å®‰è£… Playwright æµè§ˆå™¨
npx playwright install
```

### æ­¥éª¤ 2ï¼šå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨

```bash
# åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£
python server2.py
```

### æ­¥éª¤ 3ï¼šè¿è¡Œæµ‹è¯•

```bash
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£

# è¿è¡Œ Smoke Testsï¼ˆæœ€å¿«ï¼Œæœ€é‡è¦ï¼‰
npm test

# æˆ–è€…ä»¥ UI æ¨¡å¼è¿è¡Œï¼ˆæ¨èï¼‰
npm run test:ui

# æˆ–è€…çœ‹ç€æµè§ˆå™¨è¿è¡Œ
npm run test:headed
```

---

## ğŸ“Š æµ‹è¯•è¯´æ˜

### ğŸ”¥ Smoke Testsï¼ˆå†’çƒŸæµ‹è¯•ï¼‰- å¿…é¡»é€šè¿‡

**æ–‡ä»¶**ï¼š`tests/smoke/basic.spec.ts`

**æµ‹è¯•å†…å®¹**ï¼š
- âœ… é¡µé¢åŠ è½½æˆåŠŸï¼ˆHTTP 200ï¼‰
- âœ… æ²¡æœ‰ JavaScript é”™è¯¯
- âœ… æ‰€æœ‰å…³é”®å…ƒç´ å­˜åœ¨ï¼ˆå½•éŸ³æŒ‰é’®ã€è½¬å½•åŒºåŸŸç­‰ï¼‰
- âœ… åˆå§‹åŒ–æ—¥å¿—æ­£å¸¸

**ä½•æ—¶è¿è¡Œ**ï¼šæ¯æ¬¡æäº¤å‰

**é¢„æœŸæ—¶é—´**ï¼š~10 ç§’

### ğŸ”˜ Functional Testsï¼ˆåŠŸèƒ½æµ‹è¯•ï¼‰

**æ–‡ä»¶**ï¼š`tests/functional/buttons.spec.ts`

**æµ‹è¯•å†…å®¹**ï¼š
- âœ… æ‰€æœ‰æŒ‰é’®å¯ä»¥ç‚¹å‡»
- âœ… æ¨¡æ€æ¡†å¯ä»¥æ‰“å¼€/å…³é—­
- âœ… å¼€å…³å¯ä»¥åˆ‡æ¢

**ä½•æ—¶è¿è¡Œ**ï¼šæ¨é€åˆ° dev å‰

**é¢„æœŸæ—¶é—´**ï¼š~20 ç§’

### ğŸ“± Mobile Testsï¼ˆç§»åŠ¨ç«¯æµ‹è¯•ï¼‰

**æ–‡ä»¶**ï¼š`tests/mobile/mobile-devices.spec.ts`

**æµ‹è¯•å†…å®¹**ï¼š
- âœ… iPhone 14 Pro ä¸Šé¡µé¢æ­£å¸¸
- âœ… Android (Pixel 5) ä¸Šé¡µé¢æ­£å¸¸
- âœ… è§¦æ‘¸äº‹ä»¶å“åº”

**ä½•æ—¶è¿è¡Œ**ï¼šç§»åŠ¨ç«¯ç›¸å…³ä¿®æ”¹å

**é¢„æœŸæ—¶é—´**ï¼š~15 ç§’

---

## ğŸ¯ æ¨èå·¥ä½œæµç¨‹

### æ¯æ¬¡æäº¤å‰ï¼ˆæœ¬åœ°ï¼‰

```bash
# 1. ç¡®ä¿æœ¬åœ°æœåŠ¡å™¨è¿è¡Œ
python server2.py

# 2. è¿è¡Œ Smoke Tests
npm test

# 3. å¦‚æœé€šè¿‡ï¼Œæäº¤ä»£ç 
git add .
git commit -m "your changes"
git push origin dev
```

### æ¨é€åˆ° dev å‰

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:all
```

### éƒ¨ç½²åˆ° production å‰

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆåŒ…æ‹¬ç§»åŠ¨ç«¯ï¼‰
npm run test:all

# é¢å¤–è¿è¡Œç§»åŠ¨ç«¯æµ‹è¯•
npm run test:mobile
```

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### åŸºç¡€å‘½ä»¤

```bash
# åªè¿è¡Œ Smoke Testsï¼ˆæœ€å¿«ï¼‰
npm run test:smoke

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:all

# ä»¥ UI æ¨¡å¼è¿è¡Œï¼ˆæ¨èï¼Œå¯ä»¥çœ‹åˆ°æµè§ˆå™¨ï¼‰
npm run test:ui

# ä»¥ headed æ¨¡å¼è¿è¡Œï¼ˆçœ‹åˆ°æµè§ˆå™¨ä½†ä¸æš‚åœï¼‰
npm run test:headed

# åªè¿è¡Œç§»åŠ¨ç«¯æµ‹è¯•
npm run test:mobile
```

### è°ƒè¯•å‘½ä»¤

```bash
# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx playwright test tests/smoke/basic.spec.ts

# è¿è¡Œç‰¹å®šæµ‹è¯•ï¼ˆæŒ‰åç§°åŒ¹é…ï¼‰
npx playwright test -g "é¡µé¢åº”è¯¥æˆåŠŸåŠ è½½"

# ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œ
npx playwright test --debug

# æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
npx playwright show-report
```

---

## ğŸ“Š æµ‹è¯•ç»“æœè¯´æ˜

### âœ… æˆåŠŸè¾“å‡ºç¤ºä¾‹

```
Running 12 tests using 3 workers

  âœ“ [smoke-chrome] â€º smoke/basic.spec.ts:15:3 â€º é¡µé¢åº”è¯¥æˆåŠŸåŠ è½½ (523ms)
  âœ“ [smoke-chrome] â€º smoke/basic.spec.ts:23:3 â€º é¡µé¢åº”è¯¥æœ‰æ­£ç¡®çš„æ ‡é¢˜ (412ms)
  âœ“ [smoke-chrome] â€º smoke/basic.spec.ts:31:3 â€º ä¸»å®¹å™¨åº”è¯¥å¯è§ (398ms)
  ...

  12 passed (8.2s)
```

### âŒ å¤±è´¥è¾“å‡ºç¤ºä¾‹

```
  âœ— [smoke-chrome] â€º smoke/basic.spec.ts:42:3 â€º é¡µé¢ä¸åº”è¯¥æœ‰ JavaScript é”™è¯¯
    
    Error: expect(received).toHaveLength(expected)
    
    Expected length: 0
    Received length: 1
    Received array:  [
      "SyntaxError: Identifier 'currentHostname' has already been declared"
    ]
```

**å¦‚æœæµ‹è¯•å¤±è´¥**ï¼š
1. ä¸è¦æ¨é€ä»£ç ï¼
2. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
3. ä¿®å¤é—®é¢˜
4. é‡æ–°è¿è¡Œæµ‹è¯•

---

## ğŸ¨ æµ‹è¯•æŠ¥å‘Š

### HTML æŠ¥å‘Šï¼ˆæ¨èï¼‰

```bash
# è¿è¡Œæµ‹è¯•åè‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š
npm run test:all

# æŸ¥çœ‹æŠ¥å‘Š
npx playwright show-report
```

**æŠ¥å‘ŠåŒ…å«**ï¼š
- æ¯ä¸ªæµ‹è¯•çš„é€šè¿‡/å¤±è´¥çŠ¶æ€
- å¤±è´¥æµ‹è¯•çš„æˆªå›¾
- å¤±è´¥æµ‹è¯•çš„è§†é¢‘å›æ”¾
- å®Œæ•´çš„é”™è¯¯å †æ ˆ

### å®æ—¶æŠ¥å‘Šï¼ˆUI æ¨¡å¼ï¼‰

```bash
npm run test:ui
```

**UI æ¨¡å¼ä¼˜åŠ¿**ï¼š
- å®æ—¶æŸ¥çœ‹æµ‹è¯•è¿è¡Œ
- å¯ä»¥æš‚åœ/ç»§ç»­
- å¯ä»¥é€‰æ‹©æ€§è¿è¡Œæµ‹è¯•
- å¯ä»¥æŸ¥çœ‹å…ƒç´ å®šä½å™¨

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æäº¤å‰å¿…é¡»è¿è¡Œ Smoke Tests

```bash
# æ·»åŠ åˆ° Git hookï¼ˆå¯é€‰ï¼‰
npm run precommit
```

### 2. ä¿æŒæµ‹è¯•å¿«é€Ÿ

- Smoke Tests åº”è¯¥ < 15 ç§’
- Functional Tests åº”è¯¥ < 30 ç§’
- å¦‚æœå¤ªæ…¢ï¼Œè€ƒè™‘å¹¶è¡Œè¿è¡Œ

### 3. æµ‹è¯•å¤±è´¥æ—¶çš„å¤„ç†

```
æµ‹è¯•å¤±è´¥ â†’ ä¸è¦æ¨é€ â†’ ä¿®å¤é—®é¢˜ â†’ é‡æ–°æµ‹è¯• â†’ é€šè¿‡åæ¨é€
```

### 4. å®šæœŸæŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

å³ä½¿æµ‹è¯•é€šè¿‡ï¼Œä¹Ÿåº”è¯¥æŸ¥çœ‹ï¼š
- æ˜¯å¦æœ‰è­¦å‘Šï¼Ÿ
- æ˜¯å¦æœ‰ç¼“æ…¢çš„æµ‹è¯•ï¼Ÿ
- æ˜¯å¦æœ‰ flaky testsï¼Ÿ

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æç¤º "Cannot find module '@playwright/test'"

```bash
# å®‰è£…ä¾èµ–
npm install
```

### Q2: æç¤º "Executable doesn't exist"

```bash
# å®‰è£…æµè§ˆå™¨
npx playwright install
```

### Q3: æµ‹è¯•è¶…æ—¶

```bash
# ç¡®ä¿æœ¬åœ°æœåŠ¡å™¨åœ¨è¿è¡Œ
python server2.py

# æˆ–è€…å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆplaywright.config.tsï¼‰
timeout: 60 * 1000  # 60 ç§’
```

### Q4: æµ‹è¯•ä¸ç¨³å®šï¼ˆflakyï¼‰

```bash
# è¿è¡Œå¤±è´¥çš„æµ‹è¯•å¤šæ¬¡
npx playwright test --repeat-each=5

# æˆ–è€…å¢åŠ é‡è¯•æ¬¡æ•°ï¼ˆplaywright.config.tsï¼‰
retries: 2
```

---

## ğŸ“– ä¸‹ä¸€æ­¥

### å­¦ä¹ æ›´å¤š

1. **Playwright æ–‡æ¡£**ï¼šhttps://playwright.dev/
2. **æµ‹è¯•ç­–ç•¥æ–‡æ¡£**ï¼š`TESTING_STRATEGY.md`
3. **ç¤ºä¾‹æµ‹è¯•**ï¼šæŸ¥çœ‹ `tests/` ç›®å½•

### æ‰©å±•æµ‹è¯•

1. æ·»åŠ  API æ¨¡æ‹Ÿæµ‹è¯•
2. æ·»åŠ æ€§èƒ½æµ‹è¯•
3. æ·»åŠ å¯è®¿é—®æ€§æµ‹è¯•
4. é›†æˆåˆ° CI/CD

---

## ğŸ¯ è®°ä½

**å¦‚æœ Smoke Tests å¤±è´¥ â†’ ä¸è¦æ¨é€ä»£ç ï¼**

è¿™æ˜¯ä½ çš„å®‰å…¨ç½‘ï¼Œé˜²æ­¢æ˜¨å¤©å´©æºƒçš„æƒ…å†µå†æ¬¡å‘ç”Ÿã€‚

---

**åˆ›å»ºæ—¥æœŸ**ï¼š2026-02-04  
**æµ‹è¯•æ¡†æ¶**ï¼šPlaywright  
**æµ‹è¯•æ•°é‡**ï¼š12 ä¸ªåŸºç¡€æµ‹è¯•  
**é¢„è®¡è¿è¡Œæ—¶é—´**ï¼š< 1 åˆ†é’Ÿ
